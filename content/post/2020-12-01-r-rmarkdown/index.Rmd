---
title: "Countries alcohol consumtion and happiness levels"
author: "Marcell Puski"
date: 2020-05-29T21:13:14-05:00
categories: ["R"]
tags: ["R Markdown", "plot"]
---

# libraries


```{r}
library(tidyverse)
library(readxl)
library(skimr)
library(dplyr)
library(knitr)

```




# loading data

```{r}
world_happiness <- read_csv("data/2015.csv")

alcohol <- read.csv("data/drinks.csv")

```



# joining data

```{r}
# renaming country column to be the same in the two datasets
world_happiness <- 
  world_happiness %>%
  rename(country = 'Country')

# joining the two datasets based on country names
dt <- left_join(world_happiness, alcohol)


# checking joined data
apply(is.na(dt),2,sum)

# creating data set for missing data
missing_dt <- 
  dt %>%
  filter(is.na(beer_servings))


```




in a few cases there is a mismatch between the datasets in the countries names causing more missing data

The following names represent the same country:

United States = USA
Russia = Russian Federation
Congo (Brazzaville) = Congo
Congo (Kinshasa) = DR Congo
Trinidad and Tobago = Trinidad & Tobago
Somaliland region	= Somalia
Bosnia and Herzegovina = Bosnia-Herzegovina
Ivory Coast = Cote d'Ivoire


# correcting country names 

```{r}
# creating coppy for safty
chumpa <- world_happiness 


# list of country names which needs to be replaced

csere <- c("United States", "Trinidad and Tobago", "Russia", "Somaliland region", "Bosnia and Herzegovina", "Congo (Brazzaville)","Congo (Kinshasa)","Ivory Coast")


# list of corrected country names

bere <- c("USA", "Trinidad & Tobago", "Russian Federation", "Somalia", "Bosnia-Herzegovina", "Congo", "DR Congo", "Cote d'Ivoire")


# renaming country names
szerint <- which(chumpa$country %in% csere)

for (i in 1:length(szerint)) {
  chumpa$country[szerint[i]] <-  bere[i]
  
  
}

# re joining data, with corrected names
dt_clear <- left_join(chumpa, alcohol)


# checking 
dim(dt_clear)
apply(is.na(dt_clear),2,sum)


```




# Deleting NA rows

Deleting rows where there is no data about alcohol consumtion 

```{r}
dt_clear <- na.omit(dt_clear)

# checking
dim(dt_clear)

apply(is.na(dt_clear),2,sum)

```





# renaming columns without spaces

```{r}
dt_clear <- 
  dt_clear %>%
  rename(happiness_score = 'Happiness Score',
         happiness_rank = 'Happiness Rank',
         standard_error = 'Standard Error',
         GDP = 'Economy (GDP per Capita)',
         life_expectancy = 'Health (Life Expectancy)',
         corruption = 'Trust (Government Corruption)',
         dystopia_residual = 'Dystopia Residual',
         total_alcohol = 'total_litres_of_pure_alcohol')

```


